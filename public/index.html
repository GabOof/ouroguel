<!doctype html>
<html lang="pt-BR">
  <head>
    <!-- NO INÍCIO DO <head> -->
    <script>
      // Verificação IMEDIATA de autenticação
      (function () {
        // Verificar localStorage
        const userLoggedIn = localStorage.getItem("userLoggedIn");
        const userEmail = localStorage.getItem("userEmail");

        // Se não está logado, REDIRECIONAR AGORA
        if (userLoggedIn !== "true" || !userEmail) {
          // Parar qualquer carregamento adicional
          document.write = function () {};

          // Redirecionar IMEDIATAMENTE
          window.location.replace("/pages/login.html");

          // Lançar erro para parar execução
          throw new Error("Redirecionando para login");
        }
      })();
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self' https://*.firebaseio.com https://*.googleapis.com https://*.gstatic.com;
               script-src 'self' https://*.gstatic.com https://cdnjs.cloudflare.com;
               style-src 'self' https://cdnjs.cloudflare.com 'unsafe-inline';
               img-src 'self' data:;
               connect-src 'self' https://*.firebaseio.com https://*.googleapis.com https://*.gstatic.com;
               font-src 'self' https://cdnjs.cloudflare.com data:;"
    />

    <title>Sistema Ouroguel - Locação de Equipamentos</title>

    <!-- CSS do Sistema -->
    <link rel="stylesheet" href="css/style.css" />

    <!-- Fontes grandes e acessíveis -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Ícones -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  </head>
  <body>
    <!-- Cabeçalho com navegação -->
    <header class="header">
      <div class="container">
        <div class="logo" style="margin-left: -170px">
          <img src="images/logo.png" alt="Logo Ouroguel" style="width: 425px" />
        </div>
        <nav class="nav" style="margin-right: -170px">
          <ul>
            <li>
              <a href="/index.html" class="active"
                ><i class="fas fa-home"></i> Início</a
              >
            </li>
            <li>
              <a href="/pages/clientes.html"
                ><i class="fas fa-users"></i> Clientes</a
              >
            </li>
            <li>
              <a href="/pages/equipamentos.html"
                ><i class="fas fa-box"></i> Equipamentos</a
              >
            </li>
            <li>
              <a href="/pages/aluguel.html"
                ><i class="fas fa-handshake"></i> Aluguel</a
              >
            </li>
            <li>
              <a href="/pages/estoque.html"
                ><i class="fas fa-clipboard-list"></i> Estoque</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Conteúdo principal -->
    <main class="main-content">
      <div class="container">
        <!-- Tela de boas-vindas -->
        <section class="welcome-section">
          <div class="welcome-card">
            <i class="fas fa-user-circle welcome-icon"></i>
            <h2>Bem-vindo ao Sistema Ouroguel</h2>
            <p class="subtitle">
              Sistema de locação de máquinas e equipamentos
            </p>

            <div class="features-grid">
              <div class="feature-card">
                <i class="fas fa-user-plus"></i>
                <h3>Cadastro de Clientes</h3>
                <p>Cadastre clientes com todos os dados necessários</p>
                <a href="/pages/clientes.html" class="btn">Acessar</a>
              </div>

              <div class="feature-card">
                <i class="fas fa-box-open"></i>
                <h3>Controle de Estoque</h3>
                <p>Gerencie equipamentos disponíveis e alugados</p>
                <a href="/pages/estoque.html" class="btn">Acessar</a>
              </div>

              <div class="feature-card">
                <i class="fas fa-file-contract"></i>
                <h3>Registro de Aluguéis</h3>
                <p>Registre e imprima contratos de aluguel</p>
                <a href="/pages/aluguel.html" class="btn">Acessar</a>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Rodapé -->
    <footer class="footer">
      <div class="container">
        <p>Sistema desenvolvido para Ouroguel LTDA</p>
        <p class="footer-small">
          Este sistema foi desenvolvido como Trabalho de Conclusão de Curso
          (TCC) com foco em Interação Humano-Computador (IHC).
        </p>
      </div>
    </footer>

    <!-- JavaScript do Sistema -->
    <script src="js/firebase-config.js"></script>
    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/login.js"></script>
  </body>
</html>
